<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>

<body>
  <div class="container mt-5">
    <h2 class="text-center mb-4">ðŸ§¾ Checkout</h2>
    <div class="row">
      
      <!-- ðŸ§ Customer Info -->
      <div class="col-md-6">
        <h4>Billing & Shipping</h4>
        <form id="checkout-form">
          <div class="mb-3">
            <label for="name" class="form-label">Full Name</label>
            <input type="text" id="name" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input type="email" id="email" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="address" class="form-label">Shipping Address</label>
            <textarea id="address" class="form-control" required></textarea>
          </div>
        </form>
      </div>

      <!-- ðŸ›’ Order Summary -->
      <div class="col-md-6">
        <h4>Order Summary</h4>
        <ul id="order-summary" class="list-group mb-3"></ul>
        <h5>Total: â‚¹<span id="order-total">0</span></h5>
        <button class="btn btn-success w-100 mt-3" onclick="placeOrder()">Place Order</button>
      </div>
    </div>
  </div>

  <script>
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const productsList = typeof products !== "undefined" ? products : [];

    // Render Order Summary
    const summaryEl = document.getElementById("order-summary");
    const totalEl = document.getElementById("order-total");
    let subtotal = 0;

    if (cart.length === 0) {
      summaryEl.innerHTML = "<li class='list-group-item'>Your cart is empty.</li>";
    } else {
      cart.forEach(item => {
        const product = products.find(p => p.id === item.id);
        if (!product) return;

        const itemTotal = product.price * item.qty;
        subtotal += itemTotal;

        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center";
        li.innerHTML = `
          ${product.name} Ã— ${item.qty}
          <span>â‚¹${itemTotal}</span>
        `;
        summaryEl.appendChild(li);
      });

      totalEl.textContent = subtotal;
    }

    function placeOrder() {
      alert("Order placed successfully!");
      localStorage.removeItem("cart");
      window.location.href = "index.html";
    }
  </script>

  <script src="products.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="firebase.js"></script>
  <!-- Auth UI -->
  <div id="auth-section">
    <div class="auth-container">
      <div class="auth-inputs">
        <input type="email" id="auth-email" placeholder="Enter your email">
        <input type="password" id="auth-password" placeholder="Enter your password">
      </div>
      <div class="auth-buttons">
        <button onclick="login()">Login</button>
        <button onclick="signup()">Sign Up</button>
        <button onclick="logout()">Logout</button>
      </div>
      <span id="auth-status">Please login to save your cart</span>
    </div>
  </div>
</body>
</html>
